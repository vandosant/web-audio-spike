<html>
<head>
    <title>Web Audio API</title>
    <script type="text/javascript" src="public/vendors/javascript/jquery.2.1.1.js"></script>
</head>
<body>
<button class="on">On</button>
<button class="off">Off</button>
<button class="volume">Volume</button>
<button class="mute">Mute</button>

<script>
    var contextClass = (window.AudioContext ||
            window.webkitAudioContext ||
            window.mozAudioContext ||
            window.oAudioContext ||
            window.msAudioContext);
    if (contextClass) {
        var context = new contextClass();
    } else {
        $(document).append('<div class="errors">Sorry, your browser is not supported.</div>');
    }

    var oscillator = context.createOscillator();
    var gainNode = context.createGain();
    var initialFrequency = 900;
    var initialVolume = 0.2;
    var $mute = document.querySelector('.mute');

    $(document).on("click", ".on", function () {
        gainNode.connect(context.destination);
        oscillator.connect(gainNode);
        oscillator.type = 0;
        oscillator.frequency.value = initialFrequency;
        oscillator.start();
        $mute.id = "active";
        $mute.innerHTML = "Mute";
    });

    $(document).on("click", ".off", function () {
        oscillator.disconnect(0);
    });

    $mute.onclick = function () {
        if (this.id === "") {
            gainNode.connect(context.destination);
            this.innerHTML = "Mute";
            this.id = "active";
        } else {
            gainNode.disconnect(0);
            this.innerHTML = "Unmute";
            this.id = "";
        }
    };

    $(document).on("click", ".volume", function () {
        if (this.id === "") {
            gainNode.gain.value = initialVolume;
            this.id = "active";
        } else {
            gainNode.gain.value = 1;
            this.id = "";
        }
    });


</script>
</body>
</html>